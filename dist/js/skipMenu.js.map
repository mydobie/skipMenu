{"version":3,"file":"js/skipMenu.js","mappings":"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","sources":["webpack://skipMenu/./js/utilities.ts","webpack://skipMenu/./js/button.ts","webpack://skipMenu/./js/menuSection.ts","webpack://skipMenu/./js/menu.ts","webpack://skipMenu/./js/skipMenu.ts","webpack://skipMenu/./js/eventListeners.ts"],"sourcesContent":["export const isElementVisible = (el: HTMLElement): boolean => {\n  if (el.nodeType === 9 || el.parentElement === null) {\n    return true;\n  } // is at document level\n  const computedStyle = window.getComputedStyle(el);\n  const display = computedStyle.getPropertyValue('display');\n  const visibility = computedStyle.getPropertyValue('visibility');\n  const width = computedStyle.getPropertyValue('width');\n  const height = computedStyle.getPropertyValue('height');\n  const hidden = el.getAttribute('hidden');\n\n  if (\n    display === 'none' ||\n    visibility === 'hidden' ||\n    hidden !== null ||\n    width === '0px' ||\n    height === '0px'\n  ) {\n    return false;\n  }\n\n  return isElementVisible(el.parentNode as HTMLElement);\n};\n\nexport const focusNextElement = (menuButtonId = 'skipMenu_button'): void => {\n  const canHaveFocus =\n    'a:not([disabled]), button:not([disabled]), input:not([disabled]), textarea:not([disabled]), select:not([disabled]), [tabindex]:not([disabled]):not([tabindex=\"-1\"])';\n\n  const focusableElements = document.querySelectorAll(canHaveFocus);\n  const buttonIndex = Array.from(focusableElements).findIndex((el) =>\n    el.isEqualNode(document.getElementById(menuButtonId))\n  );\n  const buttonTabIndex = document.getElementById(menuButtonId).tabIndex || 0;\n\n  let nextElement;\n  if (buttonTabIndex === 0) {\n    for (\n      let i = buttonIndex + 1;\n      i < focusableElements.length && !nextElement;\n      i++\n    ) {\n      if (\n        isElementVisible(focusableElements[i] as HTMLElement) &&\n        (focusableElements[i] as HTMLElement).tabIndex === 0\n      ) {\n        nextElement = focusableElements[i];\n      }\n    }\n  } else {\n    for (\n      let i = buttonIndex + 1;\n      i < focusableElements.length && !nextElement;\n      i++\n    ) {\n      if (\n        isElementVisible(focusableElements[i] as HTMLElement) &&\n        (focusableElements[i] as HTMLElement).tabIndex >= buttonTabIndex\n      ) {\n        nextElement = focusableElements[i];\n      }\n    }\n    for (let i = 0; i < buttonIndex && !nextElement; i++) {\n      if (\n        isElementVisible(focusableElements[i] as HTMLElement) &&\n        (focusableElements[i] as HTMLElement).tabIndex === 0\n      ) {\n        nextElement = focusableElements[i];\n      }\n    }\n  }\n\n  if (nextElement) {\n    (nextElement as HTMLElement).focus();\n  } else {\n    document.getElementById(menuButtonId).focus();\n  }\n};\n\nexport const isTouchEnabled = () =>\n  'ontouchstart' in window ||\n  navigator.maxTouchPoints > 0 ||\n  // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n  // @ts-ignore\n  navigator.msMaxTouchPoints > 0;\n\nexport const isFocusable = (element: HTMLElement): boolean => {\n  if (\n    element.getAttribute('href') !== null ||\n    (element.hasAttribute('contentEditable') &&\n      element.getAttribute('contentEditable').toLowerCase() !== 'false') ||\n    element.getAttribute('tabindex') !== null\n  ) {\n    return true;\n  }\n\n  const tag = element.tagName.toLowerCase();\n  return ['button', 'details', 'input', 'iframe', 'select', 'textarea'].some(\n    (t) => t === tag\n  );\n};\n","import { SkipMenuConfig } from './skipMenu';\nimport { isTouchEnabled } from './utilities';\n\nexport const toggleMenu = (\n  config: SkipMenuConfig,\n  keepVisibleOnClose = false\n) => {\n  const menu = document.getElementById(config.menuId);\n  if (menu) {\n    const isCurrentlyExpanded = menu.style.display !== 'none';\n    if (isCurrentlyExpanded) {\n      closeMenu(config, keepVisibleOnClose);\n    } else {\n      openMenu(config);\n    }\n  }\n};\n\nexport const openMenu = (config: SkipMenuConfig) => {\n  const menu = document.getElementById(config.menuId);\n  if (menu) {\n    const button = document.getElementById(config.buttonId);\n    menu.style.display = 'block';\n    button.setAttribute('aria-expanded', 'true');\n    const firstItem = menu.querySelector('[role=\"menuitem\"]');\n    (firstItem as HTMLElement).focus();\n  }\n};\n\nexport const closeMenu = (\n  config: SkipMenuConfig,\n  keepVisibleOnClose = false\n) => {\n  const menu = document.getElementById(config.menuId);\n  if (menu) {\n    const button = document.getElementById(config.buttonId);\n    button.setAttribute('aria-expanded', 'false');\n    menu.style.display = 'none';\n    if (!keepVisibleOnClose && !config.alwaysShow) {\n      document.getElementById(config.id).classList.add('skipMenu-hidden');\n    }\n    button.focus();\n  }\n};\n\nconst toolTipText = (accessKey: string, startText: string): string => {\n  if (isTouchEnabled()) {\n    return null;\n  }\n\n  const userAgent = window.navigator.userAgent.toLowerCase();\n  // See https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/accesskey\n  const isMac = /(macintosh|macintel|macppc|mac68k|macos)/.test(userAgent);\n  const isOpera = /(opera|opr)/.test(userAgent);\n  const fireFox = /(firefox)/.test(userAgent);\n\n  let text = startText;\n  if (isMac && isOpera) {\n    text += 'Control + Alt';\n  } else if (isMac) {\n    text += 'Control + Option';\n  } else if (fireFox) {\n    text += 'Alt + Shift';\n  } else {\n    text += 'Alt';\n  }\n\n  text += ' + ' + accessKey;\n\n  return text;\n};\n\nconst toolTip = (config: SkipMenuConfig): HTMLElement | null => {\n  const toolTipTextString = toolTipText(\n    config.accessKey,\n    config.text.tooltipLabel\n  );\n  if (!toolTipTextString) {\n    return null;\n  }\n  const tooltip = document.createElement('div');\n  tooltip.id = config.tooltipId;\n  tooltip.classList.add('tooltip', 'bs-tooltip-bottom');\n  const tooltipArrow = document.createElement('div');\n  tooltipArrow.classList.add('tooltip-arrow');\n  tooltip.appendChild(tooltipArrow);\n  const tooltipInner = document.createElement('div');\n  tooltipInner.classList.add('tooltip-inner');\n  tooltipInner.textContent = toolTipText(\n    config.accessKey,\n    config.text.tooltipLabel\n  );\n  tooltip.appendChild(tooltipInner);\n  return tooltip;\n};\n\nexport const createskipMenuButton = (config: SkipMenuConfig) => {\n  const buttonWrapper = document.createDocumentFragment();\n  const skipMenuButton = document.createElement('button');\n  skipMenuButton.setAttribute('aria-haspopup', 'true');\n  skipMenuButton.setAttribute('aria-expanded', 'false');\n  skipMenuButton.setAttribute('aria-controls', config.menuId);\n  skipMenuButton.classList.add('btn', 'btn-secondary');\n  skipMenuButton.id = config.buttonId;\n  skipMenuButton.textContent = config.text.buttonLabel;\n  if (config.tabIndex) {\n    skipMenuButton.tabIndex = config.tabIndex;\n  }\n\n  skipMenuButton.addEventListener('click', (e) => {\n    e.stopPropagation();\n    e.preventDefault();\n    toggleMenu(config, true);\n  });\n\n  if (!config.alwaysShow) {\n    skipMenuButton.addEventListener('focus', () => {\n      document.getElementById(config.id).classList.remove('skipMenu-hidden');\n    });\n\n    skipMenuButton.addEventListener('blur', () => {\n      if (skipMenuButton.getAttribute('aria-expanded') === 'false') {\n        document.getElementById(config.id).classList.add('skipMenu-hidden');\n      }\n    });\n  }\n\n  buttonWrapper.appendChild(skipMenuButton);\n\n  if (config.useAccessKey) {\n    const skipMenuToolTip = toolTip(config);\n    if (skipMenuToolTip) {\n      skipMenuButton.addEventListener('focus', () => {\n        if (skipMenuButton.getAttribute('aria-expanded') === 'false') {\n          skipMenuToolTip.style.display = 'block';\n        }\n      });\n      skipMenuButton.addEventListener('blur', () => {\n        skipMenuToolTip.style.display = 'none';\n      });\n      skipMenuButton.addEventListener('mouseover', () => {\n        if (skipMenuButton.getAttribute('aria-expanded') === 'false') {\n          skipMenuToolTip.style.display = 'block';\n        }\n      });\n      skipMenuButton.addEventListener('mouseout', () => {\n        skipMenuToolTip.style.display = 'none';\n      });\n\n      buttonWrapper.appendChild(skipMenuToolTip);\n      skipMenuButton.setAttribute('accesskey', config.accessKey);\n    }\n  }\n  return buttonWrapper;\n};\n\n/* ************************************************** */\n","import { isElementVisible, focusNextElement, isFocusable } from './utilities';\nimport { closeMenu } from './button';\nimport { SkipMenuConfig } from './skipMenu';\n\n/* ********************************** */\n\nconst addMenuItemEvents = (\n  listItem: HTMLDivElement,\n  targetElement: HTMLElement,\n  config: SkipMenuConfig\n) => {\n  const buttonId = config.buttonId;\n  listItem.addEventListener('click', (event) => {\n    closeMenu(config);\n    (targetElement as HTMLElement).focus();\n    event.stopPropagation();\n    event.preventDefault();\n  });\n\n  listItem.addEventListener('keydown', (e) => {\n    if (e.key === 'Enter' || e.key === ' ') {\n      closeMenu(config);\n      (targetElement as HTMLElement).focus();\n    }\n    e.stopPropagation();\n    e.preventDefault();\n    if (e.key === 'Tab') {\n      closeMenu(config);\n      if (e.shiftKey) {\n        document.getElementById(buttonId).focus();\n      } else {\n        focusNextElement(buttonId);\n      }\n    }\n  });\n  return listItem;\n};\n\n// *****************************************************************************\n\nconst landMarkType = (element: HTMLElement, config: SkipMenuConfig) => {\n  const tag = element.tagName;\n  const role = element.getAttribute('role');\n\n  switch (role) {\n    case 'main':\n      return config.text.mainLabel;\n    case 'search':\n      return config.text.searchLabel;\n    case 'navigation':\n      return config.text.navigationLabel;\n    case 'region':\n      return config.text.regionLabel;\n    case 'complementary':\n      return config.text.complementaryLabel;\n    case 'banner':\n      return config.text.bannerLabel;\n    case 'contentinfo':\n      return config.text.footerLabel;\n  }\n  switch (tag.toLowerCase()) {\n    case 'main':\n      return config.text.mainLabel;\n    case 'nav':\n      return config.text.navigationLabel;\n    case 'section':\n      return config.text.sectionLabel;\n    case 'form':\n      return config.text.formLabel;\n    case 'aside':\n      return config.text.complementaryLabel;\n    case 'header':\n      return config.text.bannerLabel;\n    case 'footer':\n      return config.text.footerLabel;\n  }\n  return null;\n};\n\nconst getMenuItemText = (\n  element: HTMLElement,\n  isHeader: boolean,\n  config: SkipMenuConfig\n) => {\n  const landmark = landMarkType(element, config);\n  let text = '';\n  if (element.hasAttribute('aria-label')) {\n    text = element.getAttribute('aria-label');\n  } else if (element.hasAttribute('aria-labelledby')) {\n    text = document\n      .getElementById(element.getAttribute('aria-labelledby'))\n      .innerText.trim();\n  } else if (element.hasAttribute('title')) {\n    text = element.getAttribute('title');\n  }\n\n  if (landmark) {\n    return text ? `${landmark}: ${text}` : landmark;\n  } else if (isHeader) {\n    const headerText = text || element.innerText;\n    return headerText.trim();\n  } else {\n    // unsure what this is, return tagname\n    return element.tagName.toLocaleLowerCase();\n  }\n};\n\n// *****************************************************************************\n\nconst buildMenuItem = (\n  element: HTMLElement,\n  depth: number,\n  config: SkipMenuConfig\n) => {\n  let listItem = document.createElement('div');\n  let listItemText = getMenuItemText(element, !!depth, config);\n\n  if (\n    !listItemText ||\n    listItemText === '' ||\n    element.classList.contains(config.ignoreClass)\n  ) {\n    return null;\n  }\n\n  if (depth) {\n    listItem.className = `${config.id}-menu-header-level-${depth}`;\n    listItemText = `${depth}) ${listItemText}`;\n  }\n\n  const text = document.createTextNode(listItemText);\n  listItem.appendChild(text);\n  listItem.setAttribute('role', 'menuitem');\n  listItem.classList.add('dropdown-item');\n  listItem.setAttribute('tabindex', '-1');\n\n  listItem = addMenuItemEvents(listItem, element, config);\n  return listItem;\n};\n\n/* ********************************** */\n\nexport const buildMenuSection = (\n  elements: NodeListOf<Element>,\n  sectionTitle: string,\n  sectionId: string,\n  config: SkipMenuConfig\n) => {\n  if (elements.length === 0) {\n    return null;\n  }\n  const container = document.createElement('div');\n  container.setAttribute('role', 'group');\n  container.id = sectionId;\n  container.setAttribute('aria-labelledby', `${sectionId}-title`);\n  const containerTitle = document.createElement('div');\n  containerTitle.setAttribute('role', 'separator');\n  containerTitle.id = `${sectionId}-title`;\n  containerTitle.appendChild(document.createTextNode(sectionTitle));\n  container.appendChild(containerTitle);\n\n  elements.forEach((element) => {\n    if (isElementVisible(element as HTMLElement)) {\n      let depth = parseInt(element.tagName.substring(1));\n      if (element.getAttribute('aria-level')) {\n        depth = parseInt(element.getAttribute('aria-level'));\n      }\n\n      if (!isFocusable(element as HTMLElement)) {\n        (element as HTMLElement).tabIndex = -1;\n      }\n      const menuItem = buildMenuItem(element as HTMLElement, depth, config);\n      if (menuItem) {\n        container.appendChild(\n          buildMenuItem(element as HTMLElement, depth, config)\n        );\n      }\n    }\n  });\n  return container;\n};\n","import { SkipMenuConfig } from './skipMenu';\nimport { buildMenuSection } from './menuSection';\nimport { closeMenu } from './button';\n\nconst menuItemsEvent = (\n  menu: HTMLElement,\n  config: SkipMenuConfig\n): HTMLElement => {\n  // const menu = document\n  const menuItems = menu.querySelectorAll('[role=\"menuitem\"]');\n  menuItems.forEach((item, index) => {\n    (item as HTMLElement).tabIndex = -1;\n    item.addEventListener('keydown', (e: KeyboardEvent) => {\n      if (e.key == 'ArrowDown' || e.key == 'ArrowUp') {\n        e.stopPropagation();\n        e.preventDefault();\n        if (e.key === 'ArrowDown') {\n          if (menuItems[index + 1]) {\n            (menuItems[index + 1] as HTMLElement).focus();\n          } else {\n            (menuItems[0] as HTMLElement).focus();\n          }\n        }\n        if (e.key === 'ArrowUp') {\n          if (menuItems[index - 1]) {\n            (menuItems[index - 1] as HTMLElement).focus();\n          } else {\n            (menuItems[menuItems.length - 1] as HTMLElement).focus();\n          }\n        }\n      }\n      if (e.key === 'Escape') {\n        closeMenu(config);\n      }\n    });\n  });\n  return menu;\n};\n\nexport const buildMenu = (config: SkipMenuConfig): HTMLElement => {\n  // build the actual menu\n  const menu = document.createElement('div');\n  menu.setAttribute('aria-live', 'off');\n  menu.setAttribute('role', 'menu');\n  menu.classList.add('dropdown-menu');\n  menu.style.display = 'none';\n  menu.id = config.menuId;\n\n  // attach the sections\n  const headerSection = buildMenuSection(\n    document.querySelectorAll(config.headers),\n    config.text.headingsLabel,\n    `${config.id}_headings`,\n    config\n  );\n  const landmarkSection = buildMenuSection(\n    document.querySelectorAll(config.landmarks),\n    config.text.landmarksLabel,\n    `${config.id}_landmarks`,\n    config\n  );\n\n  if (landmarkSection !== null) {\n    menu.appendChild(landmarkSection);\n  }\n\n  if (headerSection !== null) {\n    menu.appendChild(headerSection);\n  }\n\n  // attach the events\n  if (headerSection !== null || landmarkSection !== null) {\n    menuItemsEvent(menu, config);\n    return menu;\n  }\n  return null;\n};\n","import { createskipMenuButton, closeMenu, openMenu } from './button';\nimport { buildMenu } from './menu';\nimport { addCloseMenuOnClick, addDomChangeListener } from './eventListeners';\n\nexport type SkipMenuConfig = {\n  id?: string;\n  attachTo?: HTMLElement;\n  alwaysShow?: boolean; // This need to be changed to alwaysShow\n  buttonId?: string;\n  menuId?: string;\n  headers?: string;\n  tooltipId?: string;\n  landmarks?: string;\n  reloadOnChange?: boolean;\n  useAccessKey?: boolean;\n  accessKey?: string;\n  tabIndex?: number | null;\n  isRemoved?: boolean; // This is used internally and should not be called directly\n  ignoreClass?: string;\n  text?: {\n    buttonLabel?: string;\n    headingsLabel?: string;\n    landmarksLabel?: string;\n    tooltipLabel?: string;\n    controlKeyLabel?: string;\n    optionKeyLabel?: string;\n    altKeyLabel?: string;\n    shiftKeyLabel?: string;\n    mainLabel?: string;\n    searchLabel?: string;\n    navigationLabel?: string;\n    regionLabel?: string;\n    complementaryLabel?: string;\n    bannerLabel?: string;\n    footerLabel?: string;\n    sectionLabel?: string;\n    formLabel?: string;\n  };\n  ensureAbsoluteParent?: boolean;\n};\nclass SkipMenu {\n  config: SkipMenuConfig;\n  constructor(config: SkipMenuConfig) {\n    const defaultConfig: SkipMenuConfig = {\n      id: 'skipMenu',\n      attachTo: document.getElementsByTagName('body')[0],\n      alwaysShow: true,\n      headers: 'h1, h2, h3, h4, h5, h6, [role=heading]',\n      landmarks:\n        'main, [role=main], [role=search], nav, [role=navigation], section, [role=region],  form, aside, [role=complementary], body > header, [role=banner], body > footer, [role=contentinfo]',\n      reloadOnChange: false,\n      useAccessKey: false,\n      accessKey: '0',\n      tabIndex: null,\n      isRemoved: false, // This is used internally and should not be called directly\n      ignoreClass: 'skipMenu-ignore',\n      text: {\n        buttonLabel: 'Skip to content',\n        headingsLabel: 'Headings',\n        landmarksLabel: 'Landmarks',\n        tooltipLabel: 'Shortcut: ',\n        controlKeyLabel: 'Control',\n        optionKeyLabel: 'Option',\n        altKeyLabel: 'Alt',\n        shiftKeyLabel: 'Shift',\n        mainLabel: 'Main',\n        searchLabel: 'Search',\n        navigationLabel: 'Navigation',\n        regionLabel: 'Region',\n        complementaryLabel: 'Complementary',\n        bannerLabel: 'Banner',\n        footerLabel: 'Footer',\n        sectionLabel: 'Section',\n        formLabel: 'Form',\n      },\n      ensureAbsoluteParent: true,\n    };\n\n    this.config = { ...defaultConfig, ...config };\n\n    if (config?.text) {\n      this.config.text = { ...defaultConfig.text, ...config.text };\n    }\n    this.config.menuId = this.config.id + '_menu';\n    this.config.buttonId = this.config.id + '_button';\n    this.config.tooltipId = this.config.id + '_tooltip';\n\n    this.update = this.update.bind(this);\n    this.getConfig = this.getConfig.bind(this);\n  }\n\n  static version = 'VERSION CANNOT BE DETERMINED'; // Note - this is replace on build\n\n  getConfig() {\n    return this.config;\n  }\n\n  init() {\n    // Load DOM change listener\n    addDomChangeListener(this.config, this.update);\n\n    // Add listener to close menu\n    addCloseMenuOnClick(this.config);\n    this._add();\n  }\n\n  _add(): void | null {\n    // builds the skipMenu container\n    if (this.config.isRemoved) {\n      return null;\n    }\n    const skipMenu = document.createDocumentFragment();\n    const skipMenuWrapper = document.createElement('div');\n    skipMenu.appendChild(skipMenuWrapper);\n\n    skipMenuWrapper.id = this.config.id;\n    skipMenuWrapper.setAttribute('data-skip-menu', 'true');\n    if (!this.config.alwaysShow) {\n      skipMenuWrapper.classList.add('skipMenu-hidden');\n    }\n\n    // builds the button\n    const skipMenuButton = createskipMenuButton(this.config);\n    skipMenuWrapper.appendChild(skipMenuButton);\n\n    const menu = buildMenu(this.config);\n\n    if (menu === null) {\n      // eslint-disable-next-line no-console\n      console.warn(\n        'No landmarks or headers found  - skipmenu could not be built'\n      );\n      return;\n    }\n\n    // Append menu items and attach event listeners\n    skipMenuWrapper.appendChild(menu);\n\n    const attachToStyles = window.getComputedStyle(this.config.attachTo);\n\n    if (\n      this.config.ensureAbsoluteParent &&\n      this.config.attachTo.tagName.toLocaleLowerCase() !== 'body' &&\n      !['sticky', 'absolute', 'fixed', 'relative', '-webkit-sticky'].some(\n        (style) => style === attachToStyles.getPropertyValue('position')\n      )\n    ) {\n      this.config.attachTo.style.position = 'relative';\n    }\n    this.config.attachTo.prepend(skipMenuWrapper);\n  }\n\n  update() {\n    const currentMenu = document.getElementById(this.config.menuId);\n    const updatedMenu = buildMenu(this.config);\n\n    if (currentMenu && updatedMenu && !currentMenu.isEqualNode(updatedMenu)) {\n      currentMenu.setAttribute('aria-busy', 'true');\n      currentMenu.replaceWith(updatedMenu);\n      currentMenu.setAttribute('aria-busy', 'false');\n    }\n    if (updatedMenu && !currentMenu) {\n      this._add();\n    }\n    if (!updatedMenu && currentMenu) {\n      this._remove();\n    }\n  }\n\n  open() {\n    openMenu(this.getConfig());\n  }\n\n  close() {\n    closeMenu(this.getConfig());\n  }\n\n  _remove() {\n    const skipMenu = document.getElementById(this.config.id);\n    if (skipMenu) {\n      skipMenu.remove();\n    }\n  }\n\n  remove() {\n    this.config.isRemoved = true;\n    this._remove();\n  }\n}\n\n// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-ignore\nwindow.SkipMenu = SkipMenu;\n","import { SkipMenuConfig } from './skipMenu';\nimport { closeMenu } from './button';\n\nexport const addCloseMenuOnClick = (config: SkipMenuConfig) => {\n  document.addEventListener('click', (e) => {\n    const menu = document.getElementById(config.menuId);\n    if (menu) {\n      const isMenuOpen = menu.style.display !== 'none';\n      if (isMenuOpen && !(e.target as HTMLElement).closest(`#${config.id}`)) {\n        closeMenu(config);\n      }\n    }\n  });\n};\n\nexport const addDomChangeListener = (\n  config: SkipMenuConfig,\n  update: () => void\n) => {\n  if (config.reloadOnChange) {\n    const obv = new MutationObserver((mutations) => {\n      mutations.forEach((mutation) => {\n        if (\n          !Array.from(mutation.removedNodes).some(\n            (removedNode) => (removedNode as HTMLElement).id === config.id\n          ) &&\n          !Array.from(mutation.addedNodes).some(\n            (addedNode) => (addedNode as HTMLElement).id === config.id\n          ) &&\n          !(mutation.target as HTMLElement).closest(`#${config.id}`) &&\n          mutation.attributeName !== 'tabindex' &&\n          // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n          //@ts-ignore\n          mutation.addedNodes[0]?.data !== '\\n\\n' &&\n          (mutation.target as HTMLElement).id !== config.id &&\n          (mutation.target as HTMLElement).id !== config.menuId\n        ) {\n          update();\n        }\n      });\n    });\n    obv.observe(document, {\n      attributes: true,\n      subtree: true,\n      childList: true,\n    });\n  }\n};\n"],"names":["isElementVisible","el","nodeType","parentElement","computedStyle","window","getComputedStyle","display","getPropertyValue","visibility","width","height","hidden","getAttribute","parentNode","openMenu","config","menu","document","getElementById","menuId","button","buttonId","style","setAttribute","querySelector","focus","closeMenu","keepVisibleOnClose","alwaysShow","id","classList","add","toolTipText","accessKey","startText","navigator","maxTouchPoints","msMaxTouchPoints","userAgent","toLowerCase","isMac","test","isOpera","fireFox","text","buildMenuItem","element","depth","listItem","createElement","listItemText","isHeader","landmark","tag","tagName","mainLabel","searchLabel","navigationLabel","regionLabel","complementaryLabel","bannerLabel","footerLabel","sectionLabel","formLabel","landMarkType","hasAttribute","innerText","trim","toLocaleLowerCase","getMenuItemText","contains","ignoreClass","className","createTextNode","appendChild","targetElement","addEventListener","event","stopPropagation","preventDefault","e","key","shiftKey","menuButtonId","nextElement","focusableElements","querySelectorAll","buttonIndex","Array","from","findIndex","isEqualNode","buttonTabIndex","tabIndex","i","length","focusNextElement","addMenuItemEvents","buildMenuSection","elements","sectionTitle","sectionId","container","containerTitle","forEach","parseInt","substring","some","t","isFocusable","buildMenu","headerSection","headers","headingsLabel","landmarkSection","landmarks","landmarksLabel","menuItems","item","index","menuItemsEvent","defaultConfig","attachTo","getElementsByTagName","reloadOnChange","useAccessKey","isRemoved","buttonLabel","tooltipLabel","controlKeyLabel","optionKeyLabel","altKeyLabel","shiftKeyLabel","ensureAbsoluteParent","this","tooltipId","update","bind","getConfig","init","MutationObserver","mutations","mutation","removedNodes","removedNode","addedNodes","addedNode","target","closest","attributeName","data","observe","attributes","subtree","childList","addCloseMenuOnClick","_add","skipMenu","createDocumentFragment","skipMenuWrapper","skipMenuButton","buttonWrapper","textContent","toggleMenu","remove","tooltip","tooltipArrow","tooltipInner","toolTip","createskipMenuButton","attachToStyles","position","prepend","console","warn","currentMenu","updatedMenu","replaceWith","_remove","open","close","version","SkipMenu"],"sourceRoot":""}