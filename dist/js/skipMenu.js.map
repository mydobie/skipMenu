{"version":3,"file":"js/skipMenu.js","mappings":"mBAAO,IAAMA,EAAmB,SAACC,GAC/B,GAAoB,IAAhBA,EAAGC,UAAuC,OAArBD,EAAGE,cAC1B,OAAO,EAET,IAAMC,EAAgBC,OAAOC,iBAAiBL,GACxCM,EAAUH,EAAcI,iBAAiB,WACzCC,EAAaL,EAAcI,iBAAiB,cAC5CE,EAAQN,EAAcI,iBAAiB,SACvCG,EAASP,EAAcI,iBAAiB,UACxCI,EAASX,EAAGY,aAAa,UAE/B,MACc,SAAZN,GACe,WAAfE,GACW,OAAXG,GACU,QAAVF,GACW,QAAXC,GAKKX,EAAiBC,EAAGa,aCHhBC,EAAW,SAACC,EAAwBC,QAAA,IAAAA,IAAAA,GAAA,GAC/C,IAAMC,EAAOC,SAASC,eAAeJ,EAAOK,iBAC5C,GAAIH,EAAM,CACR,IAAMI,EAASH,SAASC,eAAeJ,EAAOO,UAC9CL,EAAKM,MAAMjB,QAAU,QACrBe,EAAOG,aAAa,gBAAiB,QAErC,IAAMC,EAAQR,EAAKS,iBAAiB,qBAChCV,EACDS,EAAMA,EAAME,OAAS,GAAmBC,QAExCH,EAAM,GAAmBG,UAKnBC,EAAY,SACvBd,EACAe,QAAA,IAAAA,IAAAA,GAAA,GAEA,IAAMb,EAAOC,SAASC,eAAeJ,EAAOK,iBAC5C,GAAIH,EAAM,CACR,IAAMI,EAASH,SAASC,eAAeJ,EAAOO,UAC9CD,EAAOU,gBAAgB,iBACvBd,EAAKM,MAAMjB,QAAU,OAChBwB,GAAuBf,EAAOiB,YACjCd,SAASC,eAAeJ,EAAOkB,IAAIC,UAAUC,IAAI,mBAEnDd,EAAOO,UAILQ,EAAc,SAACC,EAAmBC,GACtC,GD4BA,iBAAkBlC,QAClBmC,UAAUC,eAAiB,GAG3BD,UAAUE,iBAAmB,EC/B3B,OAAO,KAGT,IAAMC,EAAYtC,OAAOmC,UAAUG,UAAUC,cAEvCC,EAAQ,2CAA2CC,KAAKH,GACxDI,EAAU,cAAcD,KAAKH,GAC7BK,EAAU,YAAYF,KAAKH,GAE7BM,EAAOV,EAaX,OAXEU,GADEJ,GAASE,EACH,gBACCF,EACD,mBACCG,EACD,cAEA,OAGF,MAAQV,GCqCZY,EAAgB,SACpBC,EACAC,EACApC,GAEA,IAAIqC,EAAWlC,SAASmC,cAAc,OAChCC,EApCgB,SACtBJ,EACAK,EACAxC,GAEA,IAAMyC,EA5Ca,SAACN,EAAsBnC,GAC1C,IAAM0C,EAAMP,EAAQQ,QAGpB,OAFaR,EAAQtC,aAAa,SAGhC,IAAK,OACH,OAAOG,EAAOiC,KAAKW,UACrB,IAAK,SACH,OAAO5C,EAAOiC,KAAKY,YACrB,IAAK,aACH,OAAO7C,EAAOiC,KAAKa,gBACrB,IAAK,SACH,OAAO9C,EAAOiC,KAAKc,YACrB,IAAK,gBACH,OAAO/C,EAAOiC,KAAKe,mBACrB,IAAK,SACH,OAAOhD,EAAOiC,KAAKgB,YACrB,IAAK,cACH,OAAOjD,EAAOiC,KAAKiB,YAEvB,OAAQR,EAAId,eACV,IAAK,OACH,OAAO5B,EAAOiC,KAAKW,UACrB,IAAK,MACH,OAAO5C,EAAOiC,KAAKa,gBACrB,IAAK,UACH,OAAO9C,EAAOiC,KAAKkB,aACrB,IAAK,OACH,OAAOnD,EAAOiC,KAAKmB,UACrB,IAAK,QACH,OAAOpD,EAAOiC,KAAKe,mBACrB,IAAK,SACH,OAAOhD,EAAOiC,KAAKgB,YACrB,IAAK,SACH,OAAOjD,EAAOiC,KAAKiB,YAEvB,OAAO,KAQUG,CAAalB,EAASnC,GACnCiC,EAAO,GAWX,OAVIE,EAAQmB,aAAa,cACvBrB,EAAOE,EAAQtC,aAAa,cACnBsC,EAAQmB,aAAa,mBAC9BrB,EAAO9B,SACJC,eAAe+B,EAAQtC,aAAa,oBACpC0D,UAAUC,OACJrB,EAAQmB,aAAa,WAC9BrB,EAAOE,EAAQtC,aAAa,UAG1B4C,EACKR,EAAO,UAAGQ,EAAQ,aAAKR,GAASQ,EAC9BD,GACUP,GAAQE,EAAQoB,WACjBC,OAGXrB,EAAQQ,QAAQc,oBAYJC,CAAgBvB,IAAWC,EAAOpC,GAEvD,IACGuC,GACgB,KAAjBA,GACAJ,EAAQhB,UAAUwC,SAAS3D,EAAO4D,aAElC,OAAO,KAGT,IAAMC,EAAO1D,SAASmC,cAAc,QAGpC,GAFAuB,EAAK1C,UAAUC,IAAI,mBAEfgB,EAAO,CACTC,EAASyB,UAAY,qCAA8B1B,GACnD,IAAM2B,EAAe5D,SAASmC,cAAc,QAC5CyB,EAAa5C,UAAUC,IAAI,oBAE3B,IAAM4C,EAAY7D,SAAS8D,eAAe,UAAG7B,IAC7C2B,EAAaG,YAAYF,GACzBH,EAAKK,YAAYH,GACjBF,EAAKK,YAAY/D,SAAS8D,eAAe,OAG3C,IAAMhC,EAAO9B,SAAS8D,eAAe1B,GAC/B4B,EAAchE,SAASmC,cAAc,QAY3C,OAXA6B,EAAYhD,UAAUC,IAAI,mBAC1B+C,EAAYD,YAAYjC,GAExB4B,EAAKK,YAAYC,GACjB9B,EAAS6B,YAAYL,GACrBxB,EAAS5B,aAAa,OAAQ,YAC9B4B,EAASlB,UAAUC,IAAI,gBAAiB,wBACxCiB,EAAS5B,aAAa,WAAY,MA9IV,SACxB4B,EACA+B,EACApE,GAEA,IAAMO,EAAWP,EAAOO,SAwBxB,OAvBA8B,EAASgC,iBAAiB,SAAS,SAACC,GAClCxD,EAAUd,GACToE,EAA8BvD,QAC/ByD,EAAMC,kBACND,EAAME,oBAGRnC,EAASgC,iBAAiB,WAAW,SAACI,GACtB,UAAVA,EAAEC,KAA6B,MAAVD,EAAEC,MACzB5D,EAAUd,GACToE,EAA8BvD,SAEjC4D,EAAEF,kBACFE,EAAED,iBACY,QAAVC,EAAEC,MACJ5D,EAAUd,GACNyE,EAAEE,SACJxE,SAASC,eAAeG,GAAUM,QFLV,SAAC+D,QAAA,IAAAA,IAAAA,EAAA,mBAC/B,IASIC,EANEC,EAAoB3E,SAASQ,iBAFjC,uKAGIoE,EAAcC,MAAMC,KAAKH,GAAmBI,WAAU,SAACjG,GAC3D,OAAAA,EAAGkG,YAAYhF,SAASC,eAAewE,OAEnCQ,EAAiBjF,SAASC,eAAewE,GAAcS,UAAY,EAGzE,GAAuB,IAAnBD,EACF,IACE,IAAIE,EAAIP,EAAc,EACtBO,EAAIR,EAAkBlE,SAAWiE,EACjCS,IAGEtG,EAAiB8F,EAAkBQ,KACgB,IAAlDR,EAAkBQ,GAAmBD,WAEtCR,EAAcC,EAAkBQ,QAG/B,CACL,IACMA,EAAIP,EAAc,EACtBO,EAAIR,EAAkBlE,SAAWiE,EACjCS,IAGEtG,EAAiB8F,EAAkBQ,KAClCR,EAAkBQ,GAAmBD,UAAYD,IAElDP,EAAcC,EAAkBQ,IAGpC,IAASA,EAAI,EAAGA,EAAIP,IAAgBF,EAAaS,IAE7CtG,EAAiB8F,EAAkBQ,KACgB,IAAlDR,EAAkBQ,GAAmBD,WAEtCR,EAAcC,EAAkBQ,IAKlCT,EACDA,EAA4BhE,QAE7BV,SAASC,eAAewE,GAAc/D,QE3ClC0E,CAAiBhF,OAIhB8B,EAmHImD,CAAkBnD,EAAUF,EAASnC,IAOrCyF,EAAmB,SAC9BC,EACAC,EACAC,EACA5F,GAEA,GAAwB,IAApB0F,EAAS9E,OACX,OAAO,KAET,IAAMiF,EAAY1F,SAASmC,cAAc,OACzCuD,EAAUpF,aAAa,OAAQ,SAC/BoF,EAAU1E,UAAUC,IAAI,mBACxByE,EAAU3E,GAAK0E,EACfC,EAAUpF,aAAa,kBAAmB,UAAGmF,EAAS,WACtD,IAAME,EAAiB3F,SAASmC,cAAc,OAwB9C,OAvBAwD,EAAerF,aAAa,OAAQ,aACpCqF,EAAe5E,GAAK,UAAG0E,EAAS,UAChCE,EAAe5B,YAAY/D,SAAS8D,eAAe0B,IACnDE,EAAU3B,YAAY4B,GAEtBJ,EAASK,SAAQ,SAAC5D,GAChB,GAAInD,EAAiBmD,GAAyB,CAC5C,IAAIC,EAAQ4D,SAAS7D,EAAQQ,QAAQsD,UAAU,IAC3C9D,EAAQtC,aAAa,gBACvBuC,EAAQ4D,SAAS7D,EAAQtC,aAAa,gBFhGnB,SAACsC,GAC1B,GACmC,OAAjCA,EAAQtC,aAAa,SACpBsC,EAAQmB,aAAa,oBACsC,UAA1DnB,EAAQtC,aAAa,mBAAmB+B,eACL,OAArCO,EAAQtC,aAAa,YAErB,OAAO,EAGT,IAAM6C,EAAMP,EAAQQ,QAAQf,cAC5B,MAAO,CAAC,SAAU,UAAW,QAAS,SAAU,SAAU,YAAYsE,MACpE,SAACC,GAAM,OAAAA,IAAMzD,KEuFN0D,CAAYjE,KACdA,EAAwBkD,UAAY,GAEtBnD,EAAcC,EAAwBC,EAAOpC,IAE5D6F,EAAU3B,YACRhC,EAAcC,EAAwBC,EAAOpC,QAK9C6F,GC/LHQ,EAAe,SACnB3B,EACA4B,EACAC,EACAC,GAEA,IAAIC,EACEC,EAAoB,wBACpBC,EAAoB,YAmB1B,OAlBAL,EAAUP,SAAQ,SAACa,EAAMtB,G,UACnBuB,EAEFA,EADEb,SAAStB,GACgC,QAA9B,EAAAkC,EAAqBrD,iBAAS,eAAEuD,MAAMH,GAAmB,GAGvC,QADlB,EAA8B,QAA/B,EAACC,EAAqBrD,iBAAS,eACvCuD,MAAMJ,GAAmB,UAAE,eAC3BjD,oBAGJ6B,GAAKiB,GACLjB,GAAKkB,IACJC,GACDI,IAAcnC,EAAI9C,gBAElB6E,EAAWnB,MAGRmB,GAiEIM,EAAY,SAAC/G,GAExB,IAAME,EAAOC,SAASmC,cAAc,OACpCpC,EAAKO,aAAa,YAAa,OAC/BP,EAAKO,aAAa,OAAQ,QAC1BP,EAAKiB,UAAUC,IAAI,aACnBlB,EAAKgB,GAAKlB,EAAOgH,OAGjB,IAAMC,EAAgBjH,EAAOkH,SACzBzB,EACEtF,SAASQ,iBAAiBX,EAAOkH,UACjClH,EAAOiC,KAAKkF,cACZ,UAAGnH,EAAOkB,GAAE,aACZlB,GAEF,KACEoH,EAAkBpH,EAAOqH,UAC3B5B,EACEtF,SAASQ,iBAAiBX,EAAOqH,WACjCrH,EAAOiC,KAAKqF,eACZ,UAAGtH,EAAOkB,GAAE,cACZlB,GAEF,KAWJ,OATwB,OAApBoH,GACFlH,EAAKgE,YAAYkD,GAGG,OAAlBH,GACF/G,EAAKgE,YAAY+C,GAIG,OAAlBA,GAA8C,OAApBG,GApFT,SACrBlH,EACAF,GAEA,IAAMsG,EAAYpG,EAAKS,iBAAiB,qBACxC2F,EAAUP,SAAQ,SAACa,EAAMW,GACtBX,EAAqBvB,UAAY,EAClCuB,EAAKvC,iBAAiB,WAAW,SAACI,GAChC,OAAQA,EAAEC,KACR,IAAK,YACHD,EAAE+C,2BACF/C,EAAED,iBACE8B,EAAUiB,EAAQ,GACnBjB,EAAUiB,EAAQ,GAAmB1G,QAErCyF,EAAU,GAAmBzF,QAEhC,MACF,IAAK,UACH4D,EAAE+C,2BACF/C,EAAED,iBACE8B,EAAUiB,EAAQ,GACnBjB,EAAUiB,EAAQ,GAAmB1G,QAErCyF,EAAUA,EAAU1F,OAAS,GAAmBC,QAEnD,MACF,IAAK,SACHC,EAAUd,GACV,MACF,IAAK,OACFsG,EAAU,GAAmBzF,QAC9B,MACF,IAAK,MACFyF,EAAUA,EAAU1F,OAAS,GAAmBC,QACjD,MACF,QACE,GAAI,gBAAgBiB,KAAK2C,EAAEC,KAAM,CAC/B,IAAM+B,EAnDc,SAC9B/B,EACA4B,EACAiB,GAEA,IAAId,EAKJ,OAJAA,EAAWJ,EAAa3B,EAAK4B,EAAWiB,EAAQ,EAAGjB,EAAU1F,OAAS,MAEpE6F,EAAWJ,EAAa3B,EAAK4B,EAAW,EAAGiB,EAAQ,IAE9Cd,EAyCoBgB,CAAwBhD,EAAEC,IAAK4B,EAAWiB,QAC1CG,IAAbjB,GACDH,EAAUG,GAA0B5F,gBA6C/C8G,CAAezH,EAAMF,GACdE,GAEF,M,gNC7FT,aAEE,WAAYF,GACV,IAAM4H,EAAgC,CACpC1G,GAAI,WACJ2G,SAAU1H,SAAS2H,qBAAqB,QAAQ,GAChD7G,YAAY,EAEZiG,SAAU,yCACVG,UACE,wLACFU,gBAAgB,EAChBC,cAAc,EACd1G,UAAW,IACX+D,SAAU,KACV4C,WAAW,EACXrE,YAAa,kBACb3B,KAAM,CACJiG,YAAa,kBACbf,cAAe,WACfG,eAAgB,YAChBa,aAAc,aACdC,gBAAiB,UACjBC,eAAgB,SAChBC,YAAa,MACbC,cAAe,QACf3F,UAAW,OACXC,YAAa,SACbC,gBAAiB,aACjBC,YAAa,SACbC,mBAAoB,gBACpBC,YAAa,SACbC,YAAa,SACbC,aAAc,UACdC,UAAW,QAEboF,sBAAsB,GAGxBC,KAAKzI,OAAS,EAAH,KAAQ4H,GAAkB5H,IAGjCA,MAAAA,OAAM,EAANA,EAAQ0I,WACVD,KAAKzI,OAAOkH,SAAWlH,EAAO0I,UAG5B1I,MAAAA,OAAM,EAANA,EAAQiC,QACVwG,KAAKzI,OAAOiC,KAAO,EAAH,KAAQ2F,EAAc3F,MAASjC,EAAOiC,OAExDwG,KAAKzI,OAAOgH,OAASyB,KAAKzI,OAAOkB,GAAK,QACtCuH,KAAKzI,OAAOK,gBAAkBoI,KAAKzI,OAAOgH,OAAS,aACnDyB,KAAKzI,OAAOO,SAAWkI,KAAKzI,OAAOkB,GAAK,UACxCuH,KAAKzI,OAAO2I,UAAYF,KAAKzI,OAAOkB,GAAK,WAEzCuH,KAAKG,OAASH,KAAKG,OAAOC,KAAKJ,MAC/BA,KAAKK,UAAYL,KAAKK,UAAUD,KAAKJ,MAiHzC,OA5GE,YAAAK,UAAA,WACE,OAAOL,KAAKzI,QAGd,YAAA+I,KAAA,WC3FkC,IAClC/I,EACA4I,EADA5I,ED4FuByI,KAAKzI,OC3F5B4I,ED2FoCH,KAAKG,OCzFrC5I,EAAO+H,gBACG,IAAIiB,kBAAiB,SAACC,GAChCA,EAAUlD,SAAQ,SAACmD,G,MAEdlE,MAAMC,KAAKiE,EAASC,cAAcjD,MACjC,SAACkD,GAAgB,OAACA,EAA4BlI,KAAOlB,EAAOkB,OAE7D8D,MAAMC,KAAKiE,EAASG,YAAYnD,MAC/B,SAACoD,GAAc,OAACA,EAA0BpI,KAAOlB,EAAOkB,OAExDgI,EAASK,OAAuBC,QAAQ,WAAIxJ,EAAOkB,MAC1B,aAA3BgI,EAASO,eAGwB,UAAX,QAAtB,EAAAP,EAASG,WAAW,UAAE,eAAEK,OACvBR,EAASK,OAAuBrI,KAAOlB,EAAOkB,IAC9CgI,EAASK,OAAuBrI,KAAOlB,EAAOgH,QAE/C4B,UAIFe,QAAQxJ,SAAU,CACpByJ,YAAY,EACZC,SAAS,EACTC,WAAW,IAzCkB,SAAC9J,GAClCG,SAASkE,iBAAiB,SAAS,SAACI,GAClC,IAAMvE,EAAOC,SAASC,eAAeJ,EAAOK,iBACxCH,GACwC,SAAvBA,EAAKM,MAAMjB,UACVkF,EAAE8E,OAAuBC,QAAQ,WAAIxJ,EAAOkB,MAC9DJ,EAAUd,MDsGd+J,CAAoBtB,KAAKzI,QACzByI,KAAKuB,QAGP,YAAAA,KAAA,WAEE,GAAIvB,KAAKzI,OAAOiI,UACd,OAAO,KAET,IAAMgC,EAAW9J,SAAS+J,yBACpBC,EAAkBhK,SAASmC,cAAc,OAC/C2H,EAAS/F,YAAYiG,GAErBA,EAAgBjJ,GAAKuH,KAAKzI,OAAOkB,GACjCiJ,EAAgB1J,aAAa,iBAAkB,QAC1CgI,KAAKzI,OAAOiB,YACfkJ,EAAgBhJ,UAAUC,IAAI,mBAIhC,IAAMgJ,EHxB0B,SAACpK,GACnC,IAAMqK,EAAgBlK,SAAS+J,yBACzBE,EAAiBjK,SAASmC,cAAc,UAC9C8H,EAAe3J,aAAa,gBAAiB,QAE7C2J,EAAepJ,gBAAgB,iBAC/BoJ,EAAe3J,aAAa,gBAAiBT,EAAOK,iBACpD+J,EAAejJ,UAAUC,IACvB,MACA,gBACA,kBACA,cACA,iBAEFgJ,EAAelJ,GAAKlB,EAAOO,SAC3B6J,EAAeE,YAActK,EAAOiC,KAAKiG,YAEzC,IAAMqC,EAAkBpK,SAASmC,cAAc,QAuC/C,GAtCAiI,EAAgBpJ,UAAUC,IAAI,8BAC9BgJ,EAAelG,YAAYqG,GACvBvK,EAAOqF,WACT+E,EAAe/E,SAAWrF,EAAOqF,UAGnC+E,EAAe/F,iBAAiB,SAAS,SAACI,GACxCA,EAAEF,kBACFE,EAAED,iBAlIoB,SACxBxE,EACAe,QAAA,IAAAA,IAAAA,GAAA,GAEA,IAAMb,EAAOC,SAASC,eAAeJ,EAAOK,iBACxCH,IACiD,SAAvBA,EAAKM,MAAMjB,QAErCuB,EAAUd,EAAQe,GAElBhB,EAASC,IAyHXwK,CAAWxK,GAAQ,MAGrBoK,EAAe/F,iBAAiB,WAAW,SAACI,GAC7B,aAATA,EAAEC,KAA+B,WAATD,EAAEC,MAC5BD,EAAEF,kBACFE,EAAED,iBACW,aAATC,EAAEC,IACJ3E,EAASC,GAETD,EAASC,GAAQ,OAKlBA,EAAOiB,aACVmJ,EAAe/F,iBAAiB,SAAS,WACvClE,SAASC,eAAeJ,EAAOkB,IAAIC,UAAUsJ,OAAO,sBAGtDL,EAAe/F,iBAAiB,QAAQ,WACjC+F,EAAe9G,aAAa,kBAC/BnD,SAASC,eAAeJ,EAAOkB,IAAIC,UAAUC,IAAI,uBAKvDiJ,EAAcnG,YAAYkG,GAEtBpK,EAAOgI,aAAc,CACvB,IAAM,EAvFM,SAAChI,GAKf,IAJ0BqB,EACxBrB,EAAOsB,UACPtB,EAAOiC,KAAKkG,cAGZ,OAAO,KAET,IAAMuC,EAAUvK,SAASmC,cAAc,OACvCoI,EAAQxJ,GAAKlB,EAAO2I,UACpB+B,EAAQvJ,UAAUC,IAChB,UACA,oBACA,eACA,eAEFsJ,EAAQjK,aAAa,OAAQ,WAC7B,IAAMkK,EAAexK,SAASmC,cAAc,OAC5CqI,EAAaxJ,UAAUC,IAAI,gBAAiB,uBAC5CsJ,EAAQxG,YAAYyG,GACpB,IAAMC,EAAezK,SAASmC,cAAc,OAO5C,OANAsI,EAAazJ,UAAUC,IAAI,gBAAiB,yBAC5CwJ,EAAaN,YAAcjJ,EACzBrB,EAAOsB,UACPtB,EAAOiC,KAAKkG,cAEduC,EAAQxG,YAAY0G,GACbF,EA4DmBG,CAAQ7K,GAC5B,IACFoK,EAAe/F,iBAAiB,SAAS,WAClC+F,EAAe9G,aAAa,mBAC/B,EAAgB9C,MAAMjB,QAAU,YAGpC6K,EAAe/F,iBAAiB,QAAQ,WACtC,EAAgB7D,MAAMjB,QAAU,UAElC6K,EAAe/F,iBAAiB,aAAa,WACtC+F,EAAe9G,aAAa,mBAC/B,EAAgB9C,MAAMjB,QAAU,YAGpC6K,EAAe/F,iBAAiB,YAAY,WAC1C,EAAgB7D,MAAMjB,QAAU,UAGlC8K,EAAcnG,YAAY,GAC1BkG,EAAe3J,aAAa,YAAaT,EAAOsB,YAGpD,OAAO+I,EGxDkBS,CAAqBrC,KAAKzI,QACjDmK,EAAgBjG,YAAYkG,GAE5B,IAAMlK,EAAO6G,EAAU0B,KAAKzI,QAE5B,GAAa,OAATE,EAAJ,CAQA,IAAM6K,EAAgB5K,SAASmC,cAAc,OAC7CyI,EAAc7J,GAAKuH,KAAKzI,OAAOK,gBAC/B0K,EAAc5J,UAAUC,IAAI,iBAC5B2J,EAAcvK,MAAMjB,QAAU,OAE9BwL,EAAc7G,YAAYhE,GAG1BiK,EAAgBjG,YAAY6G,GAE5B,IAAMC,EAAiB3L,OAAOC,iBAAiBmJ,KAAKzI,OAAO6H,UAGzDY,KAAKzI,OAAOwI,sBACyC,SAArDC,KAAKzI,OAAO6H,SAASlF,QAAQc,sBAC5B,CAAC,SAAU,WAAY,QAAS,WAAY,kBAAkByC,MAC7D,SAAC1F,GAAU,OAAAA,IAAUwK,EAAexL,iBAAiB,iBAGvDiJ,KAAKzI,OAAO6H,SAASrH,MAAMyK,SAAW,YAExCxC,KAAKzI,OAAO6H,SAASqD,QAAQf,QA3B3BgB,QAAQC,KACN,kEA6BN,YAAAxC,OAAA,WACE,IAAMyC,EAAclL,SAASC,eAAeqI,KAAKzI,OAAOgH,QAClDsE,EAAcvE,EAAU0B,KAAKzI,QAEnC,GAAIqL,GAAeC,IAAgBD,EAAYlG,YAAYmG,GAAc,CACvE,IAAM,EAAiBnL,SAASoL,cAChCF,EAAY5K,aAAa,YAAa,QACtC4K,EAAYG,YAAYF,GACxBD,EAAY5K,aAAa,YAAa,SACtC6K,EAAY3K,iBAAiB,qBAAqBoF,SAAQ,SAACa,GACrD,EAAezB,YAAYyB,IAC5BA,EAAqB/F,WAIxByK,IAAgBD,GAClB5C,KAAKuB,QAEFsB,GAAeD,GAClB5C,KAAKgD,WAIT,YAAAC,KAAA,WACE3L,EAAS0I,KAAKK,cAGhB,YAAA6C,MAAA,WACE7K,EAAU2H,KAAKK,cAGjB,YAAA2C,QAAA,WACE,IAAMxB,EAAW9J,SAASC,eAAeqI,KAAKzI,OAAOkB,IACjD+I,GACFA,EAASQ,UAIb,YAAAA,OAAA,WACEhC,KAAKzI,OAAOiI,WAAY,EACxBQ,KAAKgD,WA5GA,EAAAG,QAAU,+BA8GnB,EAxKA,GA4KAvM,OAAOwM,SAAWA,G","sources":["webpack://skipMenu/./js/utilities.ts","webpack://skipMenu/./js/button.ts","webpack://skipMenu/./js/menuSection.ts","webpack://skipMenu/./js/menu.ts","webpack://skipMenu/./js/skipMenu.ts","webpack://skipMenu/./js/eventListeners.ts"],"sourcesContent":["export const isElementVisible = (el: HTMLElement): boolean => {\n  if (el.nodeType === 9 || el.parentElement === null) {\n    return true;\n  } // is at document level\n  const computedStyle = window.getComputedStyle(el);\n  const display = computedStyle.getPropertyValue('display');\n  const visibility = computedStyle.getPropertyValue('visibility');\n  const width = computedStyle.getPropertyValue('width');\n  const height = computedStyle.getPropertyValue('height');\n  const hidden = el.getAttribute('hidden');\n\n  if (\n    display === 'none' ||\n    visibility === 'hidden' ||\n    hidden !== null ||\n    width === '0px' ||\n    height === '0px'\n  ) {\n    return false;\n  }\n\n  return isElementVisible(el.parentNode as HTMLElement);\n};\n\nexport const focusNextElement = (menuButtonId = 'skipMenu_button'): void => {\n  const canHaveFocus =\n    'a:not([disabled]), button:not([disabled]), input:not([disabled]), textarea:not([disabled]), select:not([disabled]), [tabindex]:not([disabled]):not([tabindex=\"-1\"])';\n\n  const focusableElements = document.querySelectorAll(canHaveFocus);\n  const buttonIndex = Array.from(focusableElements).findIndex((el) =>\n    el.isEqualNode(document.getElementById(menuButtonId))\n  );\n  const buttonTabIndex = document.getElementById(menuButtonId).tabIndex || 0;\n\n  let nextElement;\n  if (buttonTabIndex === 0) {\n    for (\n      let i = buttonIndex + 1;\n      i < focusableElements.length && !nextElement;\n      i++\n    ) {\n      if (\n        isElementVisible(focusableElements[i] as HTMLElement) &&\n        (focusableElements[i] as HTMLElement).tabIndex === 0\n      ) {\n        nextElement = focusableElements[i];\n      }\n    }\n  } else {\n    for (\n      let i = buttonIndex + 1;\n      i < focusableElements.length && !nextElement;\n      i++\n    ) {\n      if (\n        isElementVisible(focusableElements[i] as HTMLElement) &&\n        (focusableElements[i] as HTMLElement).tabIndex >= buttonTabIndex\n      ) {\n        nextElement = focusableElements[i];\n      }\n    }\n    for (let i = 0; i < buttonIndex && !nextElement; i++) {\n      if (\n        isElementVisible(focusableElements[i] as HTMLElement) &&\n        (focusableElements[i] as HTMLElement).tabIndex === 0\n      ) {\n        nextElement = focusableElements[i];\n      }\n    }\n  }\n\n  if (nextElement) {\n    (nextElement as HTMLElement).focus();\n  } else {\n    document.getElementById(menuButtonId).focus();\n  }\n};\n\nexport const isTouchEnabled = () =>\n  'ontouchstart' in window ||\n  navigator.maxTouchPoints > 0 ||\n  // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n  // @ts-ignore\n  navigator.msMaxTouchPoints > 0;\n\nexport const isFocusable = (element: HTMLElement): boolean => {\n  if (\n    element.getAttribute('href') !== null ||\n    (element.hasAttribute('contentEditable') &&\n      element.getAttribute('contentEditable').toLowerCase() !== 'false') ||\n    element.getAttribute('tabindex') !== null\n  ) {\n    return true;\n  }\n\n  const tag = element.tagName.toLowerCase();\n  return ['button', 'details', 'input', 'iframe', 'select', 'textarea'].some(\n    (t) => t === tag\n  );\n};\n","import { SkipMenuConfig } from './skipMenu';\nimport { isTouchEnabled } from './utilities';\n\nexport const toggleMenu = (\n  config: SkipMenuConfig,\n  keepVisibleOnClose = false\n) => {\n  const menu = document.getElementById(config.menuContainerId);\n  if (menu) {\n    const isCurrentlyExpanded = menu.style.display !== 'none';\n    if (isCurrentlyExpanded) {\n      closeMenu(config, keepVisibleOnClose);\n    } else {\n      openMenu(config);\n    }\n  }\n};\n\nexport const openMenu = (config: SkipMenuConfig, lastItem = false) => {\n  const menu = document.getElementById(config.menuContainerId);\n  if (menu) {\n    const button = document.getElementById(config.buttonId);\n    menu.style.display = 'block';\n    button.setAttribute('aria-expanded', 'true');\n\n    const items = menu.querySelectorAll('[role=\"menuitem\"]');\n    if (lastItem) {\n      (items[items.length - 1] as HTMLElement).focus();\n    } else {\n      (items[0] as HTMLElement).focus();\n    }\n  }\n};\n\nexport const closeMenu = (\n  config: SkipMenuConfig,\n  keepVisibleOnClose = false\n) => {\n  const menu = document.getElementById(config.menuContainerId);\n  if (menu) {\n    const button = document.getElementById(config.buttonId);\n    button.removeAttribute('aria-expanded');\n    menu.style.display = 'none';\n    if (!keepVisibleOnClose && !config.alwaysShow) {\n      document.getElementById(config.id).classList.add('skipMenu-hidden');\n    }\n    button.focus();\n  }\n};\n\nconst toolTipText = (accessKey: string, startText: string): string => {\n  if (isTouchEnabled()) {\n    return null;\n  }\n\n  const userAgent = window.navigator.userAgent.toLowerCase();\n  // See https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/accesskey\n  const isMac = /(macintosh|macintel|macppc|mac68k|macos)/.test(userAgent);\n  const isOpera = /(opera|opr)/.test(userAgent);\n  const fireFox = /(firefox)/.test(userAgent);\n\n  let text = startText;\n  if (isMac && isOpera) {\n    text += 'Control + Alt';\n  } else if (isMac) {\n    text += 'Control + Option';\n  } else if (fireFox) {\n    text += 'Alt + Shift';\n  } else {\n    text += 'Alt';\n  }\n\n  text += ' + ' + accessKey;\n\n  return text;\n};\n\nconst toolTip = (config: SkipMenuConfig): HTMLElement | null => {\n  const toolTipTextString = toolTipText(\n    config.accessKey,\n    config.text.tooltipLabel\n  );\n  if (!toolTipTextString) {\n    return null;\n  }\n  const tooltip = document.createElement('div');\n  tooltip.id = config.tooltipId;\n  tooltip.classList.add(\n    'tooltip',\n    'bs-tooltip-bottom',\n    'pf-c-tooltip',\n    'pf-m-bottom'\n  );\n  tooltip.setAttribute('role', 'tooltip');\n  const tooltipArrow = document.createElement('div');\n  tooltipArrow.classList.add('tooltip-arrow', 'pf-c-tooltip__arrow');\n  tooltip.appendChild(tooltipArrow);\n  const tooltipInner = document.createElement('div');\n  tooltipInner.classList.add('tooltip-inner', 'pf-c-tooltip__content');\n  tooltipInner.textContent = toolTipText(\n    config.accessKey,\n    config.text.tooltipLabel\n  );\n  tooltip.appendChild(tooltipInner);\n  return tooltip;\n};\n\nexport const createskipMenuButton = (config: SkipMenuConfig) => {\n  const buttonWrapper = document.createDocumentFragment();\n  const skipMenuButton = document.createElement('button');\n  skipMenuButton.setAttribute('aria-haspopup', 'true');\n\n  skipMenuButton.removeAttribute('aria-expanded');\n  skipMenuButton.setAttribute('aria-controls', config.menuContainerId);\n  skipMenuButton.classList.add(\n    'btn',\n    'btn-secondary',\n    'dropdown-toggle',\n    'pf-c-button',\n    'pf-m-tertiary'\n  );\n  skipMenuButton.id = config.buttonId;\n  skipMenuButton.textContent = config.text.buttonLabel;\n\n  const pfDropdownArrow = document.createElement('span');\n  pfDropdownArrow.classList.add('pf-c-dropdown__toggle-icon');\n  skipMenuButton.appendChild(pfDropdownArrow);\n  if (config.tabIndex) {\n    skipMenuButton.tabIndex = config.tabIndex;\n  }\n\n  skipMenuButton.addEventListener('click', (e) => {\n    e.stopPropagation();\n    e.preventDefault();\n    toggleMenu(config, true);\n  });\n\n  skipMenuButton.addEventListener('keydown', (e: KeyboardEvent) => {\n    if (e.key == 'ArrowDown' || e.key == 'ArrowUp') {\n      e.stopPropagation();\n      e.preventDefault();\n      if (e.key == 'ArrowDown') {\n        openMenu(config);\n      } else {\n        openMenu(config, true);\n      }\n    }\n  });\n\n  if (!config.alwaysShow) {\n    skipMenuButton.addEventListener('focus', () => {\n      document.getElementById(config.id).classList.remove('skipMenu-hidden');\n    });\n\n    skipMenuButton.addEventListener('blur', () => {\n      if (!skipMenuButton.hasAttribute('aria-expanded')) {\n        document.getElementById(config.id).classList.add('skipMenu-hidden');\n      }\n    });\n  }\n\n  buttonWrapper.appendChild(skipMenuButton);\n\n  if (config.useAccessKey) {\n    const skipMenuToolTip = toolTip(config);\n    if (skipMenuToolTip) {\n      skipMenuButton.addEventListener('focus', () => {\n        if (!skipMenuButton.hasAttribute('aria-expanded')) {\n          skipMenuToolTip.style.display = 'block';\n        }\n      });\n      skipMenuButton.addEventListener('blur', () => {\n        skipMenuToolTip.style.display = 'none';\n      });\n      skipMenuButton.addEventListener('mouseover', () => {\n        if (!skipMenuButton.hasAttribute('aria-expanded')) {\n          skipMenuToolTip.style.display = 'block';\n        }\n      });\n      skipMenuButton.addEventListener('mouseout', () => {\n        skipMenuToolTip.style.display = 'none';\n      });\n\n      buttonWrapper.appendChild(skipMenuToolTip);\n      skipMenuButton.setAttribute('accesskey', config.accessKey);\n    }\n  }\n  return buttonWrapper;\n};\n\n/* ************************************************** */\n","import { isElementVisible, focusNextElement, isFocusable } from './utilities';\nimport { closeMenu } from './button';\nimport { SkipMenuConfig } from './skipMenu';\n\n/* ********************************** */\n\nconst addMenuItemEvents = (\n  listItem: HTMLDivElement,\n  targetElement: HTMLElement,\n  config: SkipMenuConfig\n) => {\n  const buttonId = config.buttonId;\n  listItem.addEventListener('click', (event) => {\n    closeMenu(config);\n    (targetElement as HTMLElement).focus();\n    event.stopPropagation();\n    event.preventDefault();\n  });\n\n  listItem.addEventListener('keydown', (e) => {\n    if (e.key === 'Enter' || e.key === ' ') {\n      closeMenu(config);\n      (targetElement as HTMLElement).focus();\n    }\n    e.stopPropagation();\n    e.preventDefault();\n    if (e.key === 'Tab') {\n      closeMenu(config);\n      if (e.shiftKey) {\n        document.getElementById(buttonId).focus();\n      } else {\n        focusNextElement(buttonId);\n      }\n    }\n  });\n  return listItem;\n};\n\n// *****************************************************************************\n\nconst landMarkType = (element: HTMLElement, config: SkipMenuConfig) => {\n  const tag = element.tagName;\n  const role = element.getAttribute('role');\n\n  switch (role) {\n    case 'main':\n      return config.text.mainLabel;\n    case 'search':\n      return config.text.searchLabel;\n    case 'navigation':\n      return config.text.navigationLabel;\n    case 'region':\n      return config.text.regionLabel;\n    case 'complementary':\n      return config.text.complementaryLabel;\n    case 'banner':\n      return config.text.bannerLabel;\n    case 'contentinfo':\n      return config.text.footerLabel;\n  }\n  switch (tag.toLowerCase()) {\n    case 'main':\n      return config.text.mainLabel;\n    case 'nav':\n      return config.text.navigationLabel;\n    case 'section':\n      return config.text.sectionLabel;\n    case 'form':\n      return config.text.formLabel;\n    case 'aside':\n      return config.text.complementaryLabel;\n    case 'header':\n      return config.text.bannerLabel;\n    case 'footer':\n      return config.text.footerLabel;\n  }\n  return null;\n};\n\nconst getMenuItemText = (\n  element: HTMLElement,\n  isHeader: boolean,\n  config: SkipMenuConfig\n) => {\n  const landmark = landMarkType(element, config);\n  let text = '';\n  if (element.hasAttribute('aria-label')) {\n    text = element.getAttribute('aria-label');\n  } else if (element.hasAttribute('aria-labelledby')) {\n    text = document\n      .getElementById(element.getAttribute('aria-labelledby'))\n      .innerText.trim();\n  } else if (element.hasAttribute('title')) {\n    text = element.getAttribute('title');\n  }\n\n  if (landmark) {\n    return text ? `${landmark}: ${text}` : landmark;\n  } else if (isHeader) {\n    const headerText = text || element.innerText;\n    return headerText.trim();\n  } else {\n    // unsure what this is, return tagname\n    return element.tagName.toLocaleLowerCase();\n  }\n};\n\n// *****************************************************************************\n\nconst buildMenuItem = (\n  element: HTMLElement,\n  depth: number,\n  config: SkipMenuConfig\n) => {\n  let listItem = document.createElement('div');\n  const listItemText = getMenuItemText(element, !!depth, config);\n\n  if (\n    !listItemText ||\n    listItemText === '' ||\n    element.classList.contains(config.ignoreClass)\n  ) {\n    return null;\n  }\n\n  const span = document.createElement('span');\n  span.classList.add('pf-c-menu__item');\n\n  if (depth) {\n    listItem.className = `skipMenu-menu-header-level-${depth}`;\n    const depthWrapper = document.createElement('span');\n    depthWrapper.classList.add('menu__item-depth');\n\n    const depthText = document.createTextNode(`${depth}`);\n    depthWrapper.appendChild(depthText);\n    span.appendChild(depthWrapper);\n    span.appendChild(document.createTextNode(') '));\n  }\n\n  const text = document.createTextNode(listItemText);\n  const textWrapper = document.createElement('span');\n  textWrapper.classList.add('menu__item-text');\n  textWrapper.appendChild(text);\n\n  span.appendChild(textWrapper);\n  listItem.appendChild(span);\n  listItem.setAttribute('role', 'menuitem');\n  listItem.classList.add('dropdown-item', 'pf-c-menu__list-item');\n  listItem.setAttribute('tabindex', '-1');\n\n  listItem = addMenuItemEvents(listItem, element, config);\n\n  return listItem;\n};\n\n/* ********************************** */\n\nexport const buildMenuSection = (\n  elements: NodeListOf<Element>,\n  sectionTitle: string,\n  sectionId: string,\n  config: SkipMenuConfig\n) => {\n  if (elements.length === 0) {\n    return null;\n  }\n  const container = document.createElement('div');\n  container.setAttribute('role', 'group');\n  container.classList.add('pf-c-menu__list');\n  container.id = sectionId;\n  container.setAttribute('aria-labelledby', `${sectionId}-title`);\n  const containerTitle = document.createElement('div');\n  containerTitle.setAttribute('role', 'separator');\n  containerTitle.id = `${sectionId}-title`;\n  containerTitle.appendChild(document.createTextNode(sectionTitle));\n  container.appendChild(containerTitle);\n\n  elements.forEach((element) => {\n    if (isElementVisible(element as HTMLElement)) {\n      let depth = parseInt(element.tagName.substring(1));\n      if (element.getAttribute('aria-level')) {\n        depth = parseInt(element.getAttribute('aria-level'));\n      }\n\n      if (!isFocusable(element as HTMLElement)) {\n        (element as HTMLElement).tabIndex = -1;\n      }\n      const menuItem = buildMenuItem(element as HTMLElement, depth, config);\n      if (menuItem) {\n        container.appendChild(\n          buildMenuItem(element as HTMLElement, depth, config)\n        );\n      }\n    }\n  });\n  return container;\n};\n","import { SkipMenuConfig } from './skipMenu';\nimport { buildMenuSection } from './menuSection';\nimport { closeMenu } from './button';\n\nconst matchSection = (\n  key: string,\n  menuItems: NodeListOf<Element>,\n  startIndex: number,\n  endIndex: number\n) => {\n  let newIndex: number;\n  const firstLetterRegExp = /^([0-9]\\) )?\\s*([\\S])/;\n  const firstNumberRegExp = /^([0-9])?/;\n  menuItems.forEach((item, i) => {\n    let firstChar;\n    if (parseInt(key)) {\n      firstChar = (item as HTMLElement).innerText?.match(firstNumberRegExp)[1];\n    } else {\n      firstChar = (item as HTMLElement).innerText\n        ?.match(firstLetterRegExp)[2]\n        ?.toLocaleLowerCase();\n    }\n    if (\n      i >= startIndex &&\n      i <= endIndex &&\n      !newIndex &&\n      firstChar === key.toLowerCase()\n    ) {\n      newIndex = i;\n    }\n  });\n  return newIndex;\n};\n\nconst getMatchingElementIndex = (\n  key: string,\n  menuItems: NodeListOf<Element>,\n  index: number\n) => {\n  let newIndex: number;\n  newIndex = matchSection(key, menuItems, index + 1, menuItems.length - 1);\n  if (!newIndex) {\n    newIndex = matchSection(key, menuItems, 0, index - 1);\n  }\n  return newIndex;\n};\n\nconst menuItemsEvent = (\n  menu: HTMLElement,\n  config: SkipMenuConfig\n): HTMLElement => {\n  const menuItems = menu.querySelectorAll('[role=\"menuitem\"]');\n  menuItems.forEach((item, index) => {\n    (item as HTMLElement).tabIndex = -1;\n    item.addEventListener('keydown', (e: KeyboardEvent) => {\n      switch (e.key) {\n        case 'ArrowDown':\n          e.stopImmediatePropagation();\n          e.preventDefault();\n          if (menuItems[index + 1]) {\n            (menuItems[index + 1] as HTMLElement).focus();\n          } else {\n            (menuItems[0] as HTMLElement).focus();\n          }\n          break;\n        case 'ArrowUp':\n          e.stopImmediatePropagation();\n          e.preventDefault();\n          if (menuItems[index - 1]) {\n            (menuItems[index - 1] as HTMLElement).focus();\n          } else {\n            (menuItems[menuItems.length - 1] as HTMLElement).focus();\n          }\n          break;\n        case 'Escape':\n          closeMenu(config);\n          break;\n        case 'Home':\n          (menuItems[0] as HTMLElement).focus();\n          break;\n        case 'End':\n          (menuItems[menuItems.length - 1] as HTMLElement).focus();\n          break;\n        default:\n          if (/^[a-zA-Z1-9]$/.test(e.key)) {\n            const newIndex = getMatchingElementIndex(e.key, menuItems, index);\n            if (newIndex !== undefined) {\n              (menuItems[newIndex] as HTMLElement).focus();\n            }\n          }\n      }\n    });\n  });\n  return menu;\n};\n\nexport const buildMenu = (config: SkipMenuConfig): HTMLElement => {\n  // build the actual menu\n  const menu = document.createElement('div');\n  menu.setAttribute('aria-live', 'off');\n  menu.setAttribute('role', 'menu');\n  menu.classList.add('pf-c-menu');\n  menu.id = config.menuId;\n\n  // attach the sections\n  const headerSection = config.headings\n    ? buildMenuSection(\n        document.querySelectorAll(config.headings),\n        config.text.headingsLabel,\n        `${config.id}_headings`,\n        config\n      )\n    : null;\n  const landmarkSection = config.landmarks\n    ? buildMenuSection(\n        document.querySelectorAll(config.landmarks),\n        config.text.landmarksLabel,\n        `${config.id}_landmarks`,\n        config\n      )\n    : null;\n\n  if (landmarkSection !== null) {\n    menu.appendChild(landmarkSection);\n  }\n\n  if (headerSection !== null) {\n    menu.appendChild(headerSection);\n  }\n\n  // attach the events\n  if (headerSection !== null || landmarkSection !== null) {\n    menuItemsEvent(menu, config);\n    return menu;\n  }\n  return null;\n};\n","import { createskipMenuButton, closeMenu, openMenu } from './button';\nimport { buildMenu } from './menu';\nimport { addCloseMenuOnClick, addDomChangeListener } from './eventListeners';\n\nexport type SkipMenuConfig = {\n  id?: string;\n  attachTo?: HTMLElement;\n  alwaysShow?: boolean; // This need to be changed to alwaysShow\n  buttonId?: string;\n  menuId?: string;\n  menuContainerId?: string;\n  headers?: string | false;\n  headings?: string | false;\n  tooltipId?: string;\n  landmarks?: string | false;\n  reloadOnChange?: boolean;\n  useAccessKey?: boolean;\n  accessKey?: string;\n  tabIndex?: number | null;\n  isRemoved?: boolean; // This is used internally and should not be called directly\n  ignoreClass?: string;\n  text?: {\n    buttonLabel?: string;\n    headingsLabel?: string;\n    landmarksLabel?: string;\n    tooltipLabel?: string;\n    controlKeyLabel?: string;\n    optionKeyLabel?: string;\n    altKeyLabel?: string;\n    shiftKeyLabel?: string;\n    mainLabel?: string;\n    searchLabel?: string;\n    navigationLabel?: string;\n    regionLabel?: string;\n    complementaryLabel?: string;\n    bannerLabel?: string;\n    footerLabel?: string;\n    sectionLabel?: string;\n    formLabel?: string;\n  };\n  ensureAbsoluteParent?: boolean;\n};\nclass SkipMenu {\n  config: SkipMenuConfig;\n  constructor(config: SkipMenuConfig) {\n    const defaultConfig: SkipMenuConfig = {\n      id: 'skipMenu',\n      attachTo: document.getElementsByTagName('body')[0],\n      alwaysShow: true,\n      // headers: 'h1, h2, h3, h4, h5, h6, [role=heading]',\n      headings: 'h1, h2, h3, h4, h5, h6, [role=heading]',\n      landmarks:\n        'main, [role=main], [role=search], nav, [role=navigation], section, [role=region],  form, aside, [role=complementary], body > header, [role=banner], body > footer, [role=contentinfo]',\n      reloadOnChange: false,\n      useAccessKey: false,\n      accessKey: '0',\n      tabIndex: null,\n      isRemoved: false, // This is used internally and should not be called directly\n      ignoreClass: 'skipMenu-ignore',\n      text: {\n        buttonLabel: 'Skip to content',\n        headingsLabel: 'Headings',\n        landmarksLabel: 'Landmarks',\n        tooltipLabel: 'Shortcut: ',\n        controlKeyLabel: 'Control',\n        optionKeyLabel: 'Option',\n        altKeyLabel: 'Alt',\n        shiftKeyLabel: 'Shift',\n        mainLabel: 'Main',\n        searchLabel: 'Search',\n        navigationLabel: 'Navigation',\n        regionLabel: 'Region',\n        complementaryLabel: 'Complementary',\n        bannerLabel: 'Banner',\n        footerLabel: 'Footer',\n        sectionLabel: 'Section',\n        formLabel: 'Form',\n      },\n      ensureAbsoluteParent: true,\n    };\n\n    this.config = { ...defaultConfig, ...config };\n\n    // This is to support deprecated headers configuration\n    if (config?.headers) {\n      this.config.headings = config.headers;\n    }\n\n    if (config?.text) {\n      this.config.text = { ...defaultConfig.text, ...config.text };\n    }\n    this.config.menuId = this.config.id + '_menu';\n    this.config.menuContainerId = this.config.menuId + '-container';\n    this.config.buttonId = this.config.id + '_button';\n    this.config.tooltipId = this.config.id + '_tooltip';\n\n    this.update = this.update.bind(this);\n    this.getConfig = this.getConfig.bind(this);\n  }\n\n  static version = 'VERSION CANNOT BE DETERMINED'; // Note - this is replaced on build\n\n  getConfig() {\n    return this.config;\n  }\n\n  init() {\n    // Load DOM change listener\n    addDomChangeListener(this.config, this.update);\n\n    // Add listener to close menu\n    addCloseMenuOnClick(this.config);\n    this._add();\n  }\n\n  _add(): void | null {\n    // builds the skipMenu container\n    if (this.config.isRemoved) {\n      return null;\n    }\n    const skipMenu = document.createDocumentFragment();\n    const skipMenuWrapper = document.createElement('div');\n    skipMenu.appendChild(skipMenuWrapper);\n\n    skipMenuWrapper.id = this.config.id;\n    skipMenuWrapper.setAttribute('data-skip-menu', 'true');\n    if (!this.config.alwaysShow) {\n      skipMenuWrapper.classList.add('skipMenu-hidden');\n    }\n\n    // builds the button\n    const skipMenuButton = createskipMenuButton(this.config);\n    skipMenuWrapper.appendChild(skipMenuButton);\n\n    const menu = buildMenu(this.config);\n\n    if (menu === null) {\n      // eslint-disable-next-line no-console\n      console.warn(\n        'No landmarks or headings found  - skipmenu could not be built'\n      );\n      return;\n    }\n\n    const menuContainer = document.createElement('div');\n    menuContainer.id = this.config.menuContainerId;\n    menuContainer.classList.add('dropdown-menu');\n    menuContainer.style.display = 'none';\n\n    menuContainer.appendChild(menu);\n\n    // Append menu items and attach event listeners\n    skipMenuWrapper.appendChild(menuContainer);\n\n    const attachToStyles = window.getComputedStyle(this.config.attachTo);\n\n    if (\n      this.config.ensureAbsoluteParent &&\n      this.config.attachTo.tagName.toLocaleLowerCase() !== 'body' &&\n      !['sticky', 'absolute', 'fixed', 'relative', '-webkit-sticky'].some(\n        (style) => style === attachToStyles.getPropertyValue('position')\n      )\n    ) {\n      this.config.attachTo.style.position = 'relative';\n    }\n    this.config.attachTo.prepend(skipMenuWrapper);\n  }\n\n  update() {\n    const currentMenu = document.getElementById(this.config.menuId);\n    const updatedMenu = buildMenu(this.config);\n\n    if (currentMenu && updatedMenu && !currentMenu.isEqualNode(updatedMenu)) {\n      const focusedElement = document.activeElement;\n      currentMenu.setAttribute('aria-busy', 'true');\n      currentMenu.replaceWith(updatedMenu);\n      currentMenu.setAttribute('aria-busy', 'false');\n      updatedMenu.querySelectorAll('[role=\"menuitem\"]').forEach((item) => {\n        if (focusedElement.isEqualNode(item)) {\n          (item as HTMLElement).focus();\n        }\n      });\n    }\n    if (updatedMenu && !currentMenu) {\n      this._add();\n    }\n    if (!updatedMenu && currentMenu) {\n      this._remove();\n    }\n  }\n\n  open() {\n    openMenu(this.getConfig());\n  }\n\n  close() {\n    closeMenu(this.getConfig());\n  }\n\n  _remove() {\n    const skipMenu = document.getElementById(this.config.id);\n    if (skipMenu) {\n      skipMenu.remove();\n    }\n  }\n\n  remove() {\n    this.config.isRemoved = true;\n    this._remove();\n  }\n}\n\n// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-ignore\nwindow.SkipMenu = SkipMenu;\n","import { SkipMenuConfig } from './skipMenu';\nimport { closeMenu } from './button';\n\nexport const addCloseMenuOnClick = (config: SkipMenuConfig) => {\n  document.addEventListener('click', (e) => {\n    const menu = document.getElementById(config.menuContainerId);\n    if (menu) {\n      const isMenuOpen = menu.style.display !== 'none';\n      if (isMenuOpen && !(e.target as HTMLElement).closest(`#${config.id}`)) {\n        closeMenu(config);\n      }\n    }\n  });\n};\n\nexport const addDomChangeListener = (\n  config: SkipMenuConfig,\n  update: () => void\n) => {\n  if (config.reloadOnChange) {\n    const obv = new MutationObserver((mutations) => {\n      mutations.forEach((mutation) => {\n        if (\n          !Array.from(mutation.removedNodes).some(\n            (removedNode) => (removedNode as HTMLElement).id === config.id\n          ) &&\n          !Array.from(mutation.addedNodes).some(\n            (addedNode) => (addedNode as HTMLElement).id === config.id\n          ) &&\n          !(mutation.target as HTMLElement).closest(`#${config.id}`) &&\n          mutation.attributeName !== 'tabindex' &&\n          // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n          //@ts-ignore\n          mutation.addedNodes[0]?.data !== '\\n\\n' &&\n          (mutation.target as HTMLElement).id !== config.id &&\n          (mutation.target as HTMLElement).id !== config.menuId\n        ) {\n          update();\n        }\n      });\n    });\n    obv.observe(document, {\n      attributes: true,\n      subtree: true,\n      childList: true,\n    });\n  }\n};\n"],"names":["isElementVisible","el","nodeType","parentElement","computedStyle","window","getComputedStyle","display","getPropertyValue","visibility","width","height","hidden","getAttribute","parentNode","openMenu","config","lastItem","menu","document","getElementById","menuContainerId","button","buttonId","style","setAttribute","items","querySelectorAll","length","focus","closeMenu","keepVisibleOnClose","removeAttribute","alwaysShow","id","classList","add","toolTipText","accessKey","startText","navigator","maxTouchPoints","msMaxTouchPoints","userAgent","toLowerCase","isMac","test","isOpera","fireFox","text","buildMenuItem","element","depth","listItem","createElement","listItemText","isHeader","landmark","tag","tagName","mainLabel","searchLabel","navigationLabel","regionLabel","complementaryLabel","bannerLabel","footerLabel","sectionLabel","formLabel","landMarkType","hasAttribute","innerText","trim","toLocaleLowerCase","getMenuItemText","contains","ignoreClass","span","className","depthWrapper","depthText","createTextNode","appendChild","textWrapper","targetElement","addEventListener","event","stopPropagation","preventDefault","e","key","shiftKey","menuButtonId","nextElement","focusableElements","buttonIndex","Array","from","findIndex","isEqualNode","buttonTabIndex","tabIndex","i","focusNextElement","addMenuItemEvents","buildMenuSection","elements","sectionTitle","sectionId","container","containerTitle","forEach","parseInt","substring","some","t","isFocusable","matchSection","menuItems","startIndex","endIndex","newIndex","firstLetterRegExp","firstNumberRegExp","item","firstChar","match","buildMenu","menuId","headerSection","headings","headingsLabel","landmarkSection","landmarks","landmarksLabel","index","stopImmediatePropagation","getMatchingElementIndex","undefined","menuItemsEvent","defaultConfig","attachTo","getElementsByTagName","reloadOnChange","useAccessKey","isRemoved","buttonLabel","tooltipLabel","controlKeyLabel","optionKeyLabel","altKeyLabel","shiftKeyLabel","ensureAbsoluteParent","this","headers","tooltipId","update","bind","getConfig","init","MutationObserver","mutations","mutation","removedNodes","removedNode","addedNodes","addedNode","target","closest","attributeName","data","observe","attributes","subtree","childList","addCloseMenuOnClick","_add","skipMenu","createDocumentFragment","skipMenuWrapper","skipMenuButton","buttonWrapper","textContent","pfDropdownArrow","toggleMenu","remove","tooltip","tooltipArrow","tooltipInner","toolTip","createskipMenuButton","menuContainer","attachToStyles","position","prepend","console","warn","currentMenu","updatedMenu","activeElement","replaceWith","_remove","open","close","version","SkipMenu"],"sourceRoot":""}