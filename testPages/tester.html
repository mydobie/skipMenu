<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
      crossorigin="anonymous"
    />
    <link href="dist/css/skipMenu-bootstrap.css" rel="stylesheet" />
    <title>Simple Menu test</title>
    <style>
      *:focus {
        border: 1px solid #f0f;
      }
      #foo2 {
        left: 20px !important;
      }
    </style>
  </head>
  <body>
    <p>
      This page is filled with landmarks and headers to verify the building of
      the menu. Only default values are used.
    </p>
    <p>
      Note that this page does not contain valid landmarks or heder positioning.
      The ordering is purely for testing purposes.
    </p>
  </body>
  <div id="headings">
    <h1 id="changeHeaderTag">This is a tag header</h1>
    <div
      role="heading"
      aria-level="1"
      id="changeHeaderRole"
      aria-label="This is a role header"
    >
      This is a role header (do not show - aria-label is set)
    </div>
  </div>
  <div id="landmarks">
    <nav aria-label="Arial label nav" id="changeLandmarkTag">
      This is the tag navigation
    </nav>
    <div role="navigation" aria-label="Aria role nav" id="changeLandmarkRole">
      This is the aria role navigation
    </div>
  </div>
  <ul>
    <li><button id="removeMenu">Remove menu</button></li>
    <li><button id="addMenu">Add menu</button></li>
  </ul>
  <ul>
    <li><button id="addHeaderTag">Add Header Tag</button></li>
    <li><button id="addLandmarkTag">Add Landmark Tag</button></li>
  </ul>

  <script src="dist/js/skipMenu.js"></script>
  <script>
    let skipMenu = new SkipMenu();
    skipMenu.init();

    let skipMenu2;

    // ************** Open/Close ******************

    document.getElementById('removeMenu').addEventListener('click', () => {
      skipMenu.remove();
    });
    document.getElementById('addMenu').addEventListener('click', () => {
      // skipMenu = new SkipMenu({ reloadOnChange: true });
      skipMenu2 = new SkipMenu({ id: 'foo2' });
      skipMenu2.init();
    });
    // ************** Modify Headers ******************

    document.getElementById('addHeaderTag').addEventListener('click', () => {
      const headerHTML = document.getElementById('headings').innerHTML;
      document.getElementById('headings').innerHTML =
        headerHTML + '<h1>This is a new tag header</h1>';
      skipMenu.update();
      if (skipMenu2) {
        skipMenu2.update();
      }
    });

    document.getElementById('addLandmarkTag').addEventListener('click', () => {
      const headerHTML = document.getElementById('landmarks').innerHTML;
      document.getElementById('landmarks').innerHTML =
        headerHTML + '<aside>I am an aside</aside>';
      skipMenu.update();
      skipMenu2.update();
    });
  </script>
</html>
